const Instruments = { piano: { name: "Grand Piano", render: (container) => { const keys = [ { note: 'C4', freq: 261.63, type: 'white' }, { note: 'Db4', freq: 277.18, type: 'black' }, { note: 'D4', freq: 293.66, type: 'white' }, { note: 'Eb4', freq: 311.13, type: 'black' }, { note: 'E4', freq: 329.63, type: 'white' }, { note: 'F4', freq: 349.23, type: 'white' }, { note: 'Gb4', freq: 369.99, type: 'black' }, { note: 'G4', freq: 392.00, type: 'white' }, { note: 'Ab4', freq: 415.30, type: 'black' }, { note: 'A4', freq: 440.00, type: 'white' }, { note: 'Bb4', freq: 466.16, type: 'black' }, { note: 'B4', freq: 493.88, type: 'white' }, { note: 'C5', freq: 523.25, type: 'white' } ]; container.innerHTML = '<div class="piano-keys-container"></div>'; const keysContainer = container.querySelector('.piano-keys-container'); keys.forEach(key => { const keyEl = document.createElement('div'); keyEl.className = `${key.type}-key`; keyEl.dataset.note = key.note; keyEl.dataset.freq = key.freq; keyEl.addEventListener('mousedown', () => { window.audioEngine.playNote(key.freq, 'piano'); keyEl.classList.add('active'); }); keyEl.addEventListener('mouseup', () => keyEl.classList.remove('active')); keyEl.addEventListener('mouseleave', () => keyEl.classList.remove('active')); keysContainer.appendChild(keyEl); }); } }, drums: { name: "Drum Pad", render: (container) => { const pads = [ { name: 'Kick', freq: 60, icon: 'ü•Å' }, { name: 'Snare', freq: 150, icon: 'üîä' }, { note: 'Hi-Hat', freq: 1000, type: 'white' }, { note: 'Clap', freq: 800, type: 'white' } ]; container.innerHTML = '<div class="drum-pads-container"></div>'; const padsContainer = container.querySelector('.drum-pads-container'); padsContainer.style.display = 'grid'; padsContainer.style.gridTemplateColumns = 'repeat(2, 1fr)'; padsContainer.style.gap = '20px'; padsContainer.style.maxWidth = '500px'; padsContainer.style.margin = '0 auto'; pads.forEach(pad => { const padEl = document.createElement('div'); padEl.className = 'drum-pad'; padEl.innerHTML = `<span style="font-size: 2rem;">${pad.icon || 'üéµ'}</span><p style="margin-top:10px; font-weight:600;">${pad.name || pad.note}</p>`; padEl.style.background = 'var(--bg-card)'; padEl.style.border = '2px solid var(--glass-border)'; padEl.style.borderRadius = '24px'; padEl.style.padding = '30px'; padEl.style.textAlign = 'center'; padEl.style.cursor = 'pointer'; padEl.style.transition = 'var(--transition)'; padEl.addEventListener('mousedown', () => { window.audioEngine.playNote(pad.freq, 'drums', 0.2); padEl.style.borderColor = 'var(--accent)'; padEl.style.transform = 'scale(0.92)'; padEl.style.background = 'rgba(0, 210, 255, 0.1)'; }); padEl.addEventListener('mouseup', () => { padEl.style.borderColor = 'var(--glass-border)'; padEl.style.transform = 'scale(1)'; padEl.style.background = 'var(--bg-card)'; }); padsContainer.appendChild(padEl); }); } }, keyboard: { name: "Neon Synth", render: (container) => { const keys = [ { note: 'C3', freq: 130.81, type: 'white' }, { note: 'Db3', freq: 138.59, type: 'black' }, { note: 'D3', freq: 146.83, type: 'white' }, { note: 'Eb3', freq: 155.56, type: 'black' }, { note: 'E3', freq: 164.81, type: 'white' }, { note: 'F3', freq: 174.61, type: 'white' }, { note: 'Gb3', freq: 185.00, type: 'black' }, { note: 'G3', freq: 196.00, type: 'white' }, { note: 'Ab3', freq: 207.65, type: 'black' }, { note: 'A3', freq: 220.00, type: 'white' }, { note: 'Bb3', freq: 233.08, type: 'black' }, { note: 'B3', freq: 246.94, type: 'white' } ]; container.innerHTML = '<div class="piano-keys-container synth-mode"></div>'; const keysContainer = container.querySelector('.piano-keys-container'); keysContainer.style.background = 'linear-gradient(180deg, #111, #222)'; keys.forEach(key => { const keyEl = document.createElement('div'); keyEl.className = `${key.type}-key`; keyEl.style.boxShadow = key.type === 'white' ? '0 0 5px var(--accent-glow)' : '0 0 10px var(--primary-glow)'; keyEl.addEventListener('mousedown', () => { window.audioEngine.playNote(key.freq, 'keyboard', 0.8); keyEl.classList.add('active'); }); keyEl.addEventListener('mouseup', () => keyEl.classList.remove('active')); keyEl.addEventListener('mouseleave', () => keyEl.classList.remove('active')); keysContainer.appendChild(keyEl); }); } }, guitar: { name: "Acoustic Guitar", currentChord: 'C', chords: { 'C': [0, 3, 2, 0, 1, 0], 'G': [3, 2, 0, 0, 0, 3], 'D': [-1, -1, 0, 2, 3, 2], 'A': [-1, 0, 2, 2, 2, 0], 'E': [0, 2, 2, 1, 0, 0], 'F': [1, 3, 3, 2, 1, 1], 'Am': [-1, 0, 2, 2, 1, 0], 'Dm': [-1, -1, 0, 2, 3, 1] }, baseFreqs: [82.41, 110.00, 146.83, 196.00, 246.94, 329.63], render: (container) => { container.innerHTML = ` <div class="guitar-container" style="display:flex; flex-direction:column; height:100%; width:100%; padding:20px;"> <div class="chord-selector" style="display:flex; justify-content:center; gap:10px; margin-bottom:30px; flex-wrap:wrap;"></div> <div class="guitar-body" style="flex:1; background:#3d2b1f; border-radius:40px; border:8px solid #2d1b0f; position:relative; overflow:hidden; display:flex; align-items:center; padding:0 40px;"> <div class="fretboard" style="position:absolute; left:0; width:100%; height:120px; background:#222; display:flex; flex-direction:column; justify-content:space-around;"> ${[1, 2, 3, 4, 5, 6].map(() => `<div class="string-line" style="height:1px; background:linear-gradient(90deg, #666, #aaa, #666); width:100%;"></div>`).join('')} </div> <div class="strum-area" style="position:absolute; right:10%; width:150px; height:150px; border-radius:50%; background:rgba(0,0,0,0.3); border:2px dashed var(--accent); cursor:pointer; display:flex; align-items:center; justify-content:center; z-index:10;"> <span style="font-size:0.8rem; color:var(--accent); text-transform:uppercase; letter-spacing:2px;">Strum</span> </div> </div> <div style="text-align:center; margin-top:20px; color:var(--text-dim);">Select a chord and click the Strum circle or strings to play</div> </div> `; const chordSelector = container.querySelector('.chord-selector'); const guitar = Instruments.guitar; Object.keys(guitar.chords).forEach(chord => { const btn = document.createElement('button'); btn.className = `btn btn-sm ${guitar.currentChord === chord ? 'btn-primary' : 'btn-outline'}`; btn.innerText = chord; btn.style.minWidth = '60px'; btn.onclick = () => { guitar.currentChord = chord; container.querySelectorAll('.chord-selector button').forEach(b => b.className = 'btn btn-sm btn-outline'); btn.className = 'btn btn-sm btn-primary'; }; chordSelector.appendChild(btn); }); const strumArea = container.querySelector('.strum-area'); strumArea.onmousedown = () => { const chordNotes = guitar.chords[guitar.currentChord]; chordNotes.forEach((fret, i) => { if (fret !== -1) { const freq = guitar.baseFreqs[i] * Math.pow(2, fret / 12); setTimeout(() => { window.audioEngine.playNote(freq, 'guitar', 1.5); }, i * 50); } }); strumArea.style.transform = 'scale(1.1)'; setTimeout(() => strumArea.style.transform = 'scale(1)', 100); }; } }, violin: { name: "Virtuoso Violin", render: (container) => { container.innerHTML = ` <div class="violin-container"> <div class="violin-body"> <div class="violin-string" data-freq="196.00"></div> <div class="violin-string" data-freq="293.66"></div> <div class="violin-string" data-freq="440.00"></div> <div class="violin-string" data-freq="659.25"></div> </div> <div class="violin-bow"></div> </div> `; const stringsNodes = container.querySelectorAll('.violin-string'); stringsNodes.forEach(s => { s.style.width = '2px'; s.style.height = '80%'; s.style.background = '#eee'; s.style.margin = '0 20px'; s.style.boxShadow = '0 0 10px rgba(255,255,255,0.2)'; s.style.transition = '0.1s'; s.addEventListener('mouseenter', () => { window.audioEngine.playNote(parseFloat(s.dataset.freq), 'violin', 1.2); s.style.background = 'var(--accent)'; s.style.boxShadow = '0 0 20px var(--accent)'; setTimeout(() => { s.style.background = '#eee'; s.style.boxShadow = '0 0 10px rgba(255,255,255,0.2)'; }, 500); }); }); const body = container.querySelector('.violin-body'); body.style.display = 'flex'; body.style.background = '#321414'; body.style.padding = '20px 40px'; body.style.borderRadius = '50px'; body.style.border = '2px solid #502828'; const bow = container.querySelector('.violin-bow'); bow.style.position = 'absolute'; bow.style.width = '100%'; bow.style.height = '4px'; bow.style.background = 'rgba(255,255,255,0.8)'; bow.style.boxShadow = '0 0 20px white'; bow.style.pointerEvents = 'none'; bow.style.display = 'none'; container.addEventListener('mousemove', (e) => { const rect = container.getBoundingClientRect(); const y = e.clientY - rect.top; bow.style.display = 'block'; bow.style.top = `${y}px`; }); container.addEventListener('mouseleave', () => bow.style.display = 'none'); } } }; window.Instruments = Instruments;
